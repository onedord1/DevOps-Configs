## Alerts in Grafana

- Grafana alerts are used to notify users when the conditions they specifies in alert rules are met.
- Alerts rules are defined as queries and will be evaluated by alert manager continuously.
- Alerts are sent to Notification Policies then notification policies send notifications to contact points.

---

### Steps to create an alert in Grafana

#### Go to `Alerting` tab -> Click on `Alert Rules` button -> CLick on `New Alert Rule` button

1. Enter the `Name` of alert rule.
2. Under `Define query and alert condition` section, We need to add three queries:
    - Query A: We need to add the query which will be used generate the data points.
    - Query B: It is a Reduce query which will be used to reduce the data points generated by Query A into one data point.
    - Query C: We can choose either `threshold` or `math` query to create a condition based on the data points generated by Query B. Like we need to check if data point is greater than 90 for CPU usage.
3. Then Under `Set evaluation behavior` section, we need to set `Evaluation group` and `Interval` for the alert rule.
4. Now `Configure labels and notifications` section, we have to add `labels` for our alerts it is mandatory. We can also `Notification Policies` and `Contact Pooints` if we have any or we can create new.
5. Finally `Add annotations` Section, we can add annotations to alert rule if we want. Also we can add our `Runbook URL` if we have any.

Click on `Save rule and exit` button to save the alert rule.


### Steps to create a Contact Point in Grafana

1. Go to `Alerting` tab -> Click on `Contact Points` button
2. Click on `Add Contact Point` button
3. Give the `Name` to the contact point.
4. Choose the `Integration Type` from the dropdown. Example: Email, Slack, PagerDuty, etc.
5. Fill the required fields for the specific integration type. 

Click on `Save Contact Point` button to save contact point.

**Note:** If we have thought of using `Email` as Contact Points. We have to add the `SMTP` settings in Grafana configuration file to send emails.


### Steps to create a Notification Policy in Grafana

1. Go to `Alerting` tab -> Click on `Notification Policies` button
2. Click on `New Child Policy` in Default Policy
3. Enter the `labels` of the alert rule we want to create the notification policy for. We can also add metrics here but if we add metrics then the notification policy will be created for those metrics only which means the alerts with those metrics will be filtered out.
4. Choose your `Contact Point`.

Click on `Save Policy` button to save the notification policy.

---

### Silencing Alerts in Grafana

- Go to `Alerting` tab -> Click on `Silences` button
- Click on `Create Silence` button
- Choose the Date and Time for which you want to silence the alerts.
- Add the `labels` of the alerts you want to silence.
- We can also add some simple `comment` for the silence.

Click on `Save Silence` button to save the silence.

Date of notes: 06/07/2024