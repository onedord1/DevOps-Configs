server.port=9009
spring.application.name=disbursement-be

# ===================================================================
# READ/WRITE SPLITTING DATASOURCE CONFIGURATION
# ===================================================================

# --- PRIMARY (WRITE) DATASOURCE ---
# This datasource will be used for all write operations (INSERT, UPDATE, DELETE)
# and for any transaction not marked as read-only.
app.datasource.primary.jdbc-url=jdbc:postgresql://${DB_RW_HOST}:${DB_RW_PORT}/${DB_RW_NAME}?useUnicode=yes&characterEncoding=UTF-8&characterSetResults=UTF-8&serverTimezone=Asia/Dhaka
app.datasource.primary.username=${DB_RW_USERNAME}
app.datasource.primary.password=${DB_RW_PASSWORD}
app.datasource.primary.driver-class-name=org.postgresql.Driver

# --- REPLICA (READ) DATASOURCE ---
# This datasource will be used for transactions marked with @Transactional(readOnly = true)
app.datasource.replica.jdbc-url=jdbc:postgresql://${DB_RO_HOST}:${DB_RO_PORT}/${DB_RO_NAME}?useUnicode=yes&characterEncoding=UTF-8&characterSetResults=UTF-8&serverTimezone=Asia/Dhaka
app.datasource.replica.username=${DB_RO_USERNAME}
app.datasource.replica.password=${DB_RO_PASSWORD}
app.datasource.replica.driver-class-name=org.postgresql.Driver


server.tomcat.max-threads=250
spring.datasource.hikari.minimumIdle=1
spring.datasource.hikari.maximumPoolSize=15
spring.datasource.hikari.idleTimeout=30000
spring.datasource.hikari.poolName=SpringBootJPAHikariCP
spring.datasource.hikari.maxLifetime=2000000
spring.datasource.hikari.connectionTimeout=30000


# ===================================================================
# JPA & DATABASE INITIALIZATION
# ===================================================================

spring.jpa.properties.hibernate.dialect= org.hibernate.dialect.PostgreSQLDialect
spring.jpa.defer-datasource-initialization=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show_sql=false
spring.jpa.properties.hibernate.format_sql=true

spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:db/changelog/scripts/init/init-banks.sql,\
  classpath:db/changelog/scripts/init/init-roles.sql,\
  classpath:db/changelog/scripts/init/init-menu.sql,\
  classpath:db/changelog/scripts/init/init-users.sql,\
  classpath:db/changelog/scripts/init/init-orgs.sql,\
  classpath:db/changelog/scripts/init/init-competitor.sql,\
  classpath:db/changelog/scripts/init/init-product_acl.sql,\
  classpath:db/changelog/scripts/init/init-product_ail.sql,\
  classpath:db/changelog/scripts/init/init-sku.sql,\
  classpath:db/changelog/scripts/init/init-visit-categories.sql,\
  classpath:db/changelog/scripts/init/init-visit-phases.sql,\
  classpath:db/changelog/scripts/patches/update_menu.sql,\
  classpath:db/changelog/scripts/init/init-visit-stages.sql,\
  classpath:db/changelog/scripts/init/init-brands.sql,\
  classpath:db/changelog/scripts/patches/sku-update.sql


spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

###############################
############CORTEZA############
###############################

corteza.baseUrl=http://172.17.19.52
corteza.clientSecret=Z7ibJeEZsHIKWEW0L9cDJEFXy1FWAyVp51FVEHKEqgQ5fpbZa7vrSqTGWibxu2dA

jwt.signing.key.secret=j6APsyPk2KFxnYRksYer8pUWAjR7Ho8U1
jwt.token.expiration.in.seconds=60000000
upload-dir=/uploads

logging.structured.format.console=ecs

spring.liquibase.change-log=classpath:db/changelog/master.yaml
spring.liquibase.enabled=false

springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.url=/bmdsalesbe/v3/api-docs
springdoc.swagger-ui.config-url=/bmdsalesbe/v3/api-docs/swagger-config

bmdSales.frontend-url=http://172.17.17.14

spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=Asia/Dhaka
spring.jackson.serialization.write-dates-as-timestamps=false